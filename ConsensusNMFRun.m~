clear all;
clc;
dataName=[dataPath datasetName{dataIndex} '.mat'];
kmeansK=datasetClassNo(dataIndex); %% Clusters of samples
ViewN=ViewNO(dataIndex);  %% Number of views
load(dataName);% 从dataName中加载数据,如果是MAT文件，会把变量加载到工作区．如果是ASCII，创建Ｓｈａ
TotalSampleNo=length(Y); %% Labels of samples
%% LPP Paras
options = [];
options.NeighborMode = 'KNN';
options.k = 5;
options.WeightMode = 'HeatKernel';
options.t = 10;
%%
[U,V,Ustar,alpha,beta,gamma,ConX,obj]=ConsensusNMF(X,TotalSampleNo,kmeansK,ViewN,options);
Vcon=[];
for vConIndex=1:ViewN
    Vcon=[Vcon;V{vConIndex}];
end
wc=sum(Vcon.*Vcon,2);
[dumb idx] = sort(wc,'descend');
feature_idx = idx(1:N); %% select N features
selecteddata=[];
selecteddata=ConX(:,feature_idx);
res = kmeans(selecteddata, kmeansK, 'emptyaction','singleton');
toc;
newres = bestMap(Y,res);
%             =============  evaluate AC: accuracy ==============
AC = length(find(Y == newres))/length(Y);
MIhat=MutualInfo(Y,res);
%%
